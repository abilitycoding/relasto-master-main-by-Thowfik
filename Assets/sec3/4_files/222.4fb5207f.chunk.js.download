(this.webpackJsonpdhiwise=this.webpackJsonpdhiwise||[]).push([[222],{2249:function(ke,m,n){"use strict";n.d(m,"a",function(){return X});var T=n(0),e=n.n(T),Ee=n(275),H=n.n(Ee);const X=({data:b,popOverValue:te,className:Z,place:de,dropdownWrapClass:le,style:oe,onHover:ae=!1})=>{const[j,fe]=e.a.useState(!1),pe=e.a.useCallback(()=>{fe(!j)});return e.a.createElement(e.a.Fragment,null,ae?e.a.createElement("div",{className:"cursor-pointer",onMouseLeave:pe,onMouseEnter:pe},e.a.createElement(H.a,{body:[e.a.createElement(e.a.Fragment,null,te)],style:oe,isOpen:j,onOuterAction:pe,refreshIntervalMs:10,enterExitTransitionDurationMs:10,tipSize:10,place:de||null,className:`popupCustom ${le}`},e.a.createElement("span",{className:Z},b))):e.a.createElement(H.a,{body:[e.a.createElement(e.a.Fragment,null,te)],style:oe,isOpen:j,onOuterAction:pe,refreshIntervalMs:10,enterExitTransitionDurationMs:10,tipSize:10,place:de||null,className:`popupCustom ${le}`},e.a.createElement("span",{className:Z,onClick:pe},b)))}},2255:function(ke,m,n){"use strict";n.d(m,"a",function(){return qe}),n.d(m,"c",function(){return en}),n.d(m,"g",function(){return Ve}),n.d(m,"p",function(){return Ne}),n.d(m,"o",function(){return f}),n.d(m,"l",function(){return vn}),n.d(m,"n",function(){return Ue}),n.d(m,"h",function(){return ze}),n.d(m,"f",function(){return En}),n.d(m,"i",function(){return Ae}),n.d(m,"k",function(){return fn}),n.d(m,"m",function(){return Fe}),n.d(m,"j",function(){return mn}),n.d(m,"e",function(){return pn}),n.d(m,"d",function(){return gn});var T=n(25),e=n(5),Ee=n.n(e),H=n(18),X=n(557),b=n(559),te=n(163),Z=n(2275),de=n(567),le=Object.defineProperty,oe=Object.defineProperties,ae=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,_e=(i,r,C)=>r in i?le(i,r,{enumerable:!0,configurable:!0,writable:!0,value:C}):i[r]=C,je=(i,r)=>{for(var C in r||(r={}))fe.call(r,C)&&_e(i,C,r[C]);if(j)for(var C of j(r))pe.call(r,C)&&_e(i,C,r[C]);return i},Un=(i,r)=>oe(i,ae(r));const qe={currentPage:{},treeActionActiveMenu:te.g.LAYOUT,selectedCords:{},multipleSelectionId:[],panelVisibleMode:Z.d.DEFAULT,flattenedPageJson:[],hiddenComp:{},currentMediaQuery:"default",mixinClassList:[],originalPageJson:{},originalFlattened:[],multipleSelectionPath:[],bottomPanelOpenType:null},mn=Object(T.b)("SET_INITIAL_STATE"),Ve=Object(T.b)("SET_CURRENT_PAGES"),Ne=Object(T.b)("SET_ACTIVE_MENU"),f=Object(T.b)("SET_SELECTED_CORDS"),vn=Object(T.b)("SET_MULTIPLE_SELECTION"),Ue=Object(T.b)("SET_PANEL_MODE"),ze=Object(T.b)("SET_FLATTEN_PAGE_JSON"),En=Object(T.b)("SET_CURRENT_MEDIA_QUERY"),Ae=Object(T.b)("SET_HIDDEN_COMPONENTS"),fn=Object(T.b)("SET_MIXIN_JSON"),Fe=Object(T.b)("SET_MULTI_SELECTION_PATH"),pn=Object(T.b)("SET_BOTTOM_PANEL_OPEN_TYPE"),gn=Object(T.b)("RESET_BOTTOM_PANEL_OPEN_TYPE"),en=({screenJson:i,commonComponents:r})=>{const C=[];return Object(b.i)(i,{},(v,We,P,hn)=>{var nn,On,tn,ln;const De=P!=null&&P.combineKey?`${P==null?void 0:P.combineKey}/${v==null?void 0:v.id}`:v==null?void 0:v.id,J=Object(e.cloneDeep)(v);J.combineKey=De,J.combineuuid=(nn=P==null?void 0:P.parentTree)!=null&&nn.combineuuid?`${(On=P==null?void 0:P.parentTree)==null?void 0:On.combineuuid}/${v==null?void 0:v.uuid}`:v==null?void 0:v.uuid,J.uuid=(v==null?void 0:v.uuid)||"";const In=`${((tn=P==null?void 0:P.parentTree)==null?void 0:tn.componentPath)||""}${hn!==void 0?`.${hn}`:""}`;J.componentPath=In?`${In}.${v.type}`:v==null?void 0:v.type;const on=(r==null?void 0:r.findIndex(an=>an.componentRefId===(v.componentRefId||P.componentRefId)))<0;return!on&&((P==null?void 0:P.componentRefId)||(v==null?void 0:v.componentRefId))&&(J.isHideChangeComponent=!0,J.parentCommonComponent=je({originalId:(P==null?void 0:P.originalId)||(v==null?void 0:v.originalId)},r==null?void 0:r.find(an=>an.componentRefId===(P.componentRefId||(v==null?void 0:v.componentRefId))))),on&&v.children&&(J.isHideChangeComponent=JSON.stringify(v.children).includes("componentRefId")||!1),de.c.includes((v==null?void 0:v.viewTag)||v.type)&&(J.hideCreateNewComp=!0),(We.viewTag===H.O.SIDEBAR_MENU||((ln=P==null?void 0:P.parentTree)==null?void 0:ln.hideCreateNewComp))&&(J.hideCreateNewComp=!0),J.type=(J==null?void 0:J.viewTag)||J.type,on&&delete J.componentRefId,C.push(je({},J)),delete J.children,je({combineKey:De,parentTree:J},((P==null?void 0:P.componentRefId)||(v==null?void 0:v.componentRefId))&&{componentRefId:(P==null?void 0:P.componentRefId)||(v==null?void 0:v.componentRefId),originalId:(P==null?void 0:P.originalId)||(v==null?void 0:v.originalId)})}),[...C]},Gn=Object(T.d)(qe,{[mn]:i=>{i.currentPage={},i.flattenedPageJson=[],i.originalFlattened=[],i.originalPageJson={}},[Ve]:(i,{payload:r})=>{const{commonComponents:C}=Object(X.d)();i.originalPageJson=r||{},i.originalFlattened=en({screenJson:r.screen,commonComponents:C});const v=Object(b.a)(Object(b.e)(je({},r.screen),C));i.currentPage=Un(je({},r),{screen:v||{}}),i.flattenedPageJson=en({screenJson:v,commonComponents:C})},[Ne]:(i,{payload:r})=>{i.treeActionActiveMenu=r},[f]:(i,{payload:r})=>{i.selectedCords=r,i.multipleSelectionId=[],i.multipleSelectionPath=[]},[vn]:(i,{payload:r})=>{i.multipleSelectionId=r,i.selectedCords={}},[Fe]:(i,{payload:r})=>{i.multipleSelectionPath=r,i.selectedCords={}},[Ue]:(i,{payload:r})=>{r!=null&&r.mode?(i.panelVisibleMode=r==null?void 0:r.mode,i.selectedCords=r==null?void 0:r.componentJson):i.panelVisibleMode=r},[ze]:(i,{payload:r})=>{i.flattenedPageJson=r},[En]:(i,{payload:r})=>{i.currentMediaQuery=r},[Ae]:(i,{payload:r})=>{i.hiddenComp=r},[fn]:(i,{payload:r})=>{i.mixinClassList=r},[pn]:(i,{payload:r})=>{i.bottomPanelOpenType=r},[gn]:i=>{i.bottomPanelOpenType=null}});m.b=Gn},2275:function(ke,m,n){"use strict";n.d(m,"f",function(){return Ee}),n.d(m,"e",function(){return H}),n.d(m,"c",function(){return X}),n.d(m,"a",function(){return b}),n.d(m,"i",function(){return te}),n.d(m,"g",function(){return Z}),n.d(m,"h",function(){return le}),n.d(m,"d",function(){return oe}),n.d(m,"b",function(){return ae});var T=n(4),e=n(18);const Ee=T.E,H="react-pane",X={INIT:"INIT",INIT_DATA:"INIT_DATA",CHANGE_PAGE:"CHANGE_PAGE",CHANGE_JSON:"CHANGE_JSON",COMP_SELECT:"COMP_SELECT",COMP_HOVER:"COMP_HOVER",MULTI_SELECT:"MULTI_SELECT",CSS_CHANGE:"CSS_CHANGE",RESIZE:"RESIZE",CHANGE_COMP:"CHANGE_COMP",CREATE_ACTION:"CREATE_ACTION",CHANGE_COMPONENT_SUCCESS:"CHANGE_COMPONENT_SUCCESS",CHANGE_MODE:"CHANGE_MODE",MODE_DATA:"MODE_DATA",JSON_DATA:"JSON_DATA",GROUP:"GROUP",UNGROUP:"UNGROUP",LEAVE_IFRAME:"LEAVE_IFRAME",ENTER_IFRAME:"ENTER_IFRAME",OPEN_JSON:"OPEN_JSON",API_INTEGRATION_VIEW_OPEN:"API_INTEGRATION_VIEW_OPEN",MIXIN_ADD:"MIXIN_ADD",MIXIN_UPDATE:"MIXIN_UPDATE",MIXIN_DELETE:"MIXIN_DELETE",MIXIN_APPLY:"MIXIN_APPLY",CREATE_COMPONENT:"CREATE_COMPONENT",DETACH_COMPONENT:"DETACH_COMPONENT",CREATE_EXISTING_COMPONENT:"CREATE_EXISTING_COMPONENT",SHOW_SUGGESTION:"SHOW_SUGGESTION",ERROR_LOG:"ERROR_LOG",SUGGESTION_ACTION:"SUGGESTION_ACTION",CLOSE_SUGGESTION_DRAWER:"CLOSE_SUGGESTION_DRAWER",PAGE_CODE_VIEW:"PAGE_CODE_VIEW",CHANGE_PAGE_NAME:"CHANGE_PAGE_NAME",NEXT_SUGGESTION:"NEXT_SUGGESTION",CLOSE_SUGGESTION:"CLOSE_SUGGESTION",SCROLL:"SCROLL",BUNDLER_STATUS:"BUNDLER_STATUS"},b={ASSET_IMAGE:2,FONT:3},te={desktop:"100%",tablet:"960px",mobile:"480px"},Z={sm:"sm",md:"md",default:"default"},de=[{name:"flex-direction"},{name:"align-items"},{name:"justify-content"},{name:"display"},{name:"margin"},{name:"margin-top"},{name:"margin-right"},{name:"margin-bottom"},{name:"margin-left"},{name:"padding-top"},{name:"padding-right"},{name:"padding-bottom"},{name:"padding-left"},{name:"padding"},{name:"grid-template-columns"},{name:"gap"},{name:"font-family"},{name:"font-size"},{name:"font-weight"},{name:"color"},{name:"line-height"},{name:"letter-spacing"},{name:"text-align"},{name:"text-transform"},{name:"text-decoration"},{name:"width"},{name:"min-width"},{name:"max-width"},{name:"height"},{name:"min-height"},{name:"max-height"},{name:"position"},{name:"top"},{name:"left"},{name:"bottom"},{name:"right"},{name:"border-radius"},{name:"border-top-left-radius"},{name:"border-top-right-radius"},{name:"border-bottom-left-radius"},{name:"border-bottom-right-radius"},{name:"border"},{name:"border-top"},{name:"border-bottom"},{name:"border-left"},{name:"border-right"},{name:"border-width"},{name:"border-top-width"},{name:"border-bottom-width"},{name:"border-left-width"},{name:"border-right-width"},{name:"border-style"},{name:"border-color"},{name:"border-top-color"},{name:"border-bottom-color"},{name:"border-left-color"},{name:"border-right-color"},{name:"background-color"},{name:"opacity"},{name:"cursor"},{name:"overflow"},{name:"overflow-x"},{name:"overflow-y"}],le={Table:{"border-spacing":0},Select:{"z-index":1e3}},oe={DEFAULT:"DEFAULT",SECTION_NAV:"SECTION_NAV",SECTION_NAV_COMPLETE:"SECTION_NAV_COMPLETE",SLIDER:e.D.slider,SLIDER_PREVIOUS_CONTROL:e.D.prevSliderControl,SLIDER_NEXT_CONTROL:e.D.nextSliderControl,SLIDER_PAGE_INDICATOR:e.D.pagerIndicator,TAB_LIST:e.D.tabList,TAB_CONTENT:e.D.tabContent,ALL_ACTIONS:e.D.allActions,TABLE:e.D.table,TABLE_HEADER:e.D.tableHeader,TABLE_BODY:e.D.tableData},ae={CHANGE_STYLE:"CHANGE_STYLE"}},2511:function(ke,m,n){"use strict";n.d(m,"a",function(){return e});var T=n(274);const e=({currentPage:Ee,appSourcePath:H,error:X,userData:b,currentProjectDetail:te,applicationId:Z="",previewCode:de=""})=>{var le,oe,ae;const j=Object(T.d)(),fe=(le=te==null?void 0:te.applicationList)==null?void 0:le.find(pe=>pe._id===Z);return!Object(T.b)()&&fetch(j?"https://hooks.slack.com/services/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":"https://hooks.slack.com/services/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",{method:"POST",body:JSON.stringify({attachments:[{fallback:`Error in ${j?"Quality":"Production"}`,pretext:`*Error in ${j?"Quality":"Production"}*`,color:"#D00000",fields:[{title:"-------------Details-----------",value:`*PageName* = ${`${Ee.screenName}`} 
 *ScreenId* = ${Ee.screenId} 
 *UserEmail* = ${b==null?void 0:b.email}  
 *mode* =${de?"Preview":"Editor"} 
 ${H?`*appSourcePath* = ${H} 
`:""} ${(oe=fe==null?void 0:fe.stepInput)!=null&&oe.figmaFileId?`*figmaUrl* = https://www.figma.com/files/${(ae=fe==null?void 0:fe.stepInput)==null?void 0:ae.figmaFileId} 
`:""}  ${Z?`*applicationId* = ${Z} 
`:""} ${`*previewCode* =${(fe==null?void 0:fe.previewCode)||de}`}`,short:!1},{title:"------------Error-------------",value:X,short:!1}]}]})})}},2521:function(ke,m,n){"use strict";n.d(m,"a",function(){return X});var T=n(0),e=n.n(T),Ee=n(3),H=n(7);const X=({onClose:b,isOpen:te,pages:Z,onChange:de,handleSearch:le,searchText:oe,selectedItemId:ae})=>e.a.createElement(H.db,{closeFalse:!0,isOpen:te,size:"w-full h-screen",height:"h-screen bg-surface1",bodyClass:"sm:bg-transparent sm:p-0"},e.a.createElement("div",{className:"pt-10 flex flex-col h-screen"},e.a.createElement("div",{className:"w-8/12 mx-auto"},e.a.createElement("div",{className:"flex justify-between items-center border-b border-outline mb-4 pb-4 flex-shrink-0"},e.a.createElement(H.H,{variant:"dhi_sub2"},"Select screen to Preview"),e.a.createElement("div",{className:"flex items-center"},e.a.createElement(H.gb,{size:"medium",className:"mr-4",onSearch:le,value:oe}),e.a.createElement(H.i.Icon,{variant:"coolgray",size:"medium",shape:"round",onClick:b},e.a.createElement(Ee.b.Close,null))))),e.a.createElement("div",{className:"h-full flex-grow overflow-auto pb-10"},e.a.createElement("div",{className:"w-8/12 mx-auto"},e.a.createElement("div",{className:""},e.a.createElement("div",{className:"grid grid-cols-4 xxl:grid-cols-5 gap-6"},Z==null?void 0:Z.map(j=>e.a.createElement(H.sb,{isSelect:j.value===ae,tooltipfalse:!0,key:j==null?void 0:j.value,image:j.signedUrl,size:"lg",imgWrapClass:"overflow-hidden sm:p-0",imgClass:"sm:object-cover",title:j==null?void 0:j.label,onClick:()=>{b(),de(j)}}))))))))},2971:function(ke,m,n){"use strict";n.r(m),n.d(m,"SCREEN_TAG",function(){return rn}),n.d(m,"widthMappingLabels",function(){return dt});var T=n(0),e=n.n(T),Ee=n(579),H=n.n(Ee),X=n(3),b=n(5),te=n(320),Z=n.n(te),de=n(26),le=n(45),oe=n(73),ae=n.n(oe),j=n(231),fe=n(560),pe=n(109),_e=n(35),je=n(47),Un=n(2303),qe=n(126),mn=n(230),Ve=n(2),Ne=n(8),f=n(7),vn=n(2521),Ue=n(30),ze=n(559),En=n(2249),Ae=n(198),fn=n(4),Fe=n(110),pn=n(123),gn=n(11),en=n(32),Gn=n(52),i=n(2275),r=n(163);const C={preview:"preview",screenshot:"screenshot"};function v(){const[d,l]=e.a.useState(C.preview),c={preview:d===C.preview,screenshot:d===C.screenshot},F=e.a.useMemo(()=>({preview:()=>l(C.preview),screenshot:()=>l(C.screenshot)}),[]),k=e.a.useCallback(()=>l(ce=>ce===C.preview?C.screenshot:C.preview),[]);return{is:c,toggle:k,switchTo:F}}function We({listRef:d,current:l,setCurrent:c,dataRef:F}){var k,ce,ye,ge;const Q=d.current.findIndex(A=>A.screenId===(l==null?void 0:l.screenId)),q=(k=d.current[Q-1])!=null?k:!1,N=(ce=d.current[Q+1])!=null?ce:!1,be=e.a.useCallback(A=>{const ie=d.current.find(sn=>sn.screenId===A);!ie||c(ie)},[]),He=e.a.useCallback(()=>{!q||c(q)},[q]),Le=e.a.useCallback(()=>{!N||c(N)},[N]);return e.a.useDebugValue({current:l,previous:q,next:N,dataRef:F}),{current:l,goTo:be,previous:q,goToPrevious:He,next:N,goToNext:Le,allPagesJson:(ye=F.current)==null?void 0:ye.dhiwiseJson,componentList:(ge=F.current)==null?void 0:ge.componentListJson}}We.getCurrent=function(l,c){return l.current.find(F=>F.screenId===(c==null?void 0:c.value))},We.convertToSelectable=function(l){return{value:l==null?void 0:l.screenId,label:l==null?void 0:l.screenName,width:l==null?void 0:l.width,height:l==null?void 0:l.height}};var P=n(2511),hn=n(22),nn=n(627),On=n(275),tn=n.n(On),ln=n(18),De=n(149),J=n(2255),In=Object.defineProperty,on=Object.defineProperties,an=Object.getOwnPropertyDescriptors,Wn=Object.getOwnPropertySymbols,et=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,Hn=(d,l,c)=>l in d?In(d,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):d[l]=c,Y=(d,l)=>{for(var c in l||(l={}))et.call(l,c)&&Hn(d,c,l[c]);if(Wn)for(var c of Wn(l))nt.call(l,c)&&Hn(d,c,l[c]);return d},Se=(d,l)=>on(d,an(l));const Sn=[{id:"page",name:"Page",default:!0},{id:"component",name:"Component"},{id:"modal",name:"Modal"},{id:"drawer",name:"Drawer"},{id:"other",name:"Other"}],Cn=[{id:"b2b",name:"B2B"},{id:"marketing",name:"Marketing"},{id:"testing",name:"Testing",default:!0},{id:"design system",name:"Design System"},{id:"product",name:"Product"},{id:"other",name:"Other"}],tt=[{label:"login",value:"Login"},{label:"signup",value:"Sign Up"},{label:"product_list",value:"Product List"},{label:"product_detail",value:"Product Detail"}],Pn=[{id:"yes",name:"Yes"},{id:"no",name:"No",default:!0},{id:"mixed",name:"Mixed"}],Tn=[{id:"90-100",name:"90-100",default:!0},{id:"70-90",name:"70-90"},{id:"50-70",name:"50-70"},{id:"0-50",name:"0-50"}],$n=d=>e.a.createElement("div",null,e.a.createElement(hn.r.Option,Y({},d),e.a.createElement(f.l,{checked:d==null?void 0:d.isSelected})," ",e.a.createElement("label",{className:"ml-2 mb-0"},d==null?void 0:d.label)));function lt({previewApplicationId:d,screens:l,previewType:c}){var F,k,ce,ye,ge;const[Q,q]=e.a.useState(!1),[N,be]=e.a.useState({}),[He,Le]=e.a.useState(!1),[A,ie]=e.a.useState({}),[sn,xe]=e.a.useState(""),[An,he]=e.a.useState(""),[Ye,wn,dn]=Object(je.a)(!1),{addErrorToast:Jn,addSuccessToast:Dn}=Object(Ue.j)(),cn=e.a.useRef(null);e.a.useEffect(()=>{l!=null&&l.allPagesJson&&(cn.current=l==null?void 0:l.allPagesJson.map(t=>{const{screenId:O}=t,ee=[];let Oe=0;const ue=[];return Object(J.c)({screenJson:t.screen,commonComponents:l.componentList}).forEach(x=>{ee.push(x.viewTag||x.type),x.type===ln.f.STACK&&(!ue.includes(x==null?void 0:x.componentRefId)&&!!x.componentRefId||!x.componentRefId&&!x.parentCommonComponent)&&(Oe+=1,x.componentRefId&&ue.push(x.componentRefId))}),{screenId:O,identifiedComponents:Object(b.uniq)(ee),numberOfStacks:Oe}}))},[l]),e.a.useEffect(()=>{var t,O,ee,Oe,ue,Be,x,Ce;Object(b.isEmpty)(A)&&ie({pageType:(O=(t=Sn==null?void 0:Sn.filter(W=>W==null?void 0:W.default))==null?void 0:t[0])==null?void 0:O.id,designAccuracy:(Oe=(ee=Tn==null?void 0:Tn.filter(W=>W==null?void 0:W.default))==null?void 0:ee[0])==null?void 0:Oe.id}),Object(b.isEmpty)(N)&&be({appCategory:(Be=(ue=Cn==null?void 0:Cn.filter(W=>W==null?void 0:W.default))==null?void 0:ue[0])==null?void 0:Be.id,isTargetedDesign:(Ce=(x=Pn==null?void 0:Pn.filter(W=>W==null?void 0:W.default))==null?void 0:x[0])==null?void 0:Ce.id})},[A,N]);const Qe=e.a.useCallback(()=>{q(!Q),be({})}),$=e.a.useCallback(()=>{Le(!He),ie({})}),yn=({form:t=""})=>{var O,ee,Oe,ue,Be,x;let Ce={appId:d};if(t==="applicationData"&&(Ce=Y(Y(Y({},Ce),N),(N==null?void 0:N.appCategory)==="other"&&{appCategory:An})),t==="screenData"){const W=(O=cn.current)==null?void 0:O.find(Ie=>{var L;return(Ie==null?void 0:Ie.screenId)===((L=l==null?void 0:l.current)==null?void 0:L.screenId)});Ce=Se(Y({},Ce),{screenData:Y(Y(Se(Y({},A),{screenId:(ee=l==null?void 0:l.current)==null?void 0:ee.screenId,pageCategory:(Oe=A==null?void 0:A.pageCategory)==null?void 0:Oe.map(Ie=>Ie==null?void 0:Ie.value)}),(A==null?void 0:A.pageType)==="other"&&{pageType:sn}),!Object(b.isEmpty)(cn.current)&&!Object(b.isEmpty)(W)&&{identifiedComponents:(ue=W==null?void 0:W.identifiedComponents)==null?void 0:ue.join(","),notIdentifiedComponent:(Be=A==null?void 0:A.notIdentifiedComponent)==null?void 0:Be.map(Ie=>Ie==null?void 0:Ie.value),numberOfStacks:(x=W==null?void 0:W.numberOfStacks)!=null?x:0})})}wn(!0),Object(Fe.a)(Ce).then(()=>{dn(),Dn("Data Added Successfully"),t==="screenData"?$():Qe()}).catch(()=>{dn(),Jn("Something bad happened!")})};return e.a.createElement("div",{className:"bg-surface3 flex justify-between border-t border-outline p-2"},e.a.createElement(tn.a,{isOpen:He,onOuterAction:$,refreshIntervalMs:10,enterExitTransitionDurationMs:10,tipSize:10,place:"below",className:"popupCustom w-100%",body:[e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"mb-5"},e.a.createElement(De.a,{size:"large"},"Select Page Type"),e.a.createElement(f.fb,{onChange:t=>ie(O=>Se(Y({},O),{pageType:t})),className:"flex",selectedValue:A==null?void 0:A.pageType},Sn==null?void 0:Sn.map(t=>e.a.createElement(f.eb,{className:"mr-4",value:t==null?void 0:t.id},t==null?void 0:t.name))),(A==null?void 0:A.pageType)==="other"&&e.a.createElement(f.I.Text,{label:"Tags",placeholder:"Form/Table/Modal",onChange:t=>xe(t),WrapClassName:"mt-5"})),e.a.createElement("div",{className:"mb-5"},e.a.createElement(De.a,{size:"large"},"Design Accuracy"),e.a.createElement(f.fb,{onChange:t=>ie(O=>Se(Y({},O),{designAccuracy:t})),className:"flex",selectedValue:A==null?void 0:A.designAccuracy},Tn==null?void 0:Tn.map(t=>e.a.createElement(f.eb,{className:"mr-4",value:t==null?void 0:t.id},t==null?void 0:t.name)))),e.a.createElement(De.a,{size:"large"},"Select Page Category"),e.a.createElement(nn.a,{menuPortalTarget:document.body,options:tt,isMulti:!0,components:{Option:$n},closeMenuOnSelect:!1,hideSelectedOptions:!1,value:(F=A==null?void 0:A.pageCategory)!=null?F:[],onChange:t=>ie(O=>Se(Y({},O),{pageCategory:t})),getOptionLabel:t=>t==null?void 0:t.label,getOptionValue:t=>t==null?void 0:t.value,isOptionDisabled:t=>t==null?void 0:t.isdisabled,className:"dhi_select_option",closeMenuOnScroll:t=>{var O;return((O=t==null?void 0:t.target)==null?void 0:O.id)==="dhiSelect"},menuPlacement:"auto",classNamePrefix:"large dhi_select",placeholder:"Select Page Category",styles:{menuPortal:t=>Se(Y({},t),{zIndex:1e8})}}),e.a.createElement(De.a,{size:"large",className:"mt-5"},"Select not auto identified component"),e.a.createElement(nn.a,{menuPortalTarget:document.body,options:[...ln.K[Ve.c.figmaReact].map(t=>({value:t.type,label:t.name})),{value:"Video",label:"VideoPlayer"}],isMulti:!0,components:{Option:$n},closeMenuOnSelect:!1,value:(k=A==null?void 0:A.notIdentifiedComponent)!=null?k:[],hideSelectedOptions:!1,onChange:t=>ie(O=>Se(Y({},O),{notIdentifiedComponent:t})),getOptionLabel:t=>t==null?void 0:t.label,getOptionValue:t=>t==null?void 0:t.value,isOptionDisabled:t=>t==null?void 0:t.isdisabled,className:"dhi_select_option",closeMenuOnScroll:t=>{var O;return((O=t==null?void 0:t.target)==null?void 0:O.id)==="dhiSelect"},menuPlacement:"auto",classNamePrefix:"large dhi_select",placeholder:"Select not auto identified component",styles:{menuPortal:t=>Se(Y({},t),{zIndex:1e8})}}),e.a.createElement("div",{className:"flex mt-5 gap-2 justify-center"},e.a.createElement(f.i,{size:"medium",variant:"outline",onClick:()=>ie({})},"Reset"),e.a.createElement(f.i,{loading:Ye,size:"medium",variant:"primary",onClick:()=>yn({form:"screenData"})},"Submit")))]},e.a.createElement(f.i,{className:"cursor-pointer",size:"medium",variant:"outline",onClick:$},"Screen Data")),e.a.createElement("div",{className:"flex gap-3"},(l==null?void 0:l.previous)&&e.a.createElement(f.i,{size:"medium",variant:"outline",onClick:l==null?void 0:l.goToPrevious},"Previous"),(l==null?void 0:l.next)&&e.a.createElement(f.i,{size:"medium",variant:"outline",onClick:l==null?void 0:l.goToNext},"Next"),((ce=l==null?void 0:l.current)==null?void 0:ce.pathSignedUrl)&&e.a.createElement(f.i,{className:"gap-2",size:"medium",variant:"outline",onClick:c==null?void 0:c.toggle},((ye=c==null?void 0:c.is)==null?void 0:ye.preview)&&"Show Screenshot",((ge=c==null?void 0:c.is)==null?void 0:ge.screenshot)&&"Show Preview")),e.a.createElement(tn.a,{isOpen:Q,onOuterAction:Qe,refreshIntervalMs:10,enterExitTransitionDurationMs:10,tipSize:10,place:"below",className:"popupCustom w-100%",body:[e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"mb-5"},e.a.createElement(De.a,{size:"large"},"Select App Category"),e.a.createElement(f.fb,{onChange:t=>be(O=>Se(Y({},O),{appCategory:t})),className:"flex",selectedValue:N==null?void 0:N.appCategory},Cn==null?void 0:Cn.map(t=>e.a.createElement(f.eb,{className:"mr-4",value:t==null?void 0:t.id},t==null?void 0:t.name))),(N==null?void 0:N.appCategory)==="other"&&e.a.createElement(f.I.Text,{label:"Tags",placeholder:"Form/Table/Modal",onChange:t=>he(t),WrapClassName:"mt-5"})),e.a.createElement("div",{className:"mb-5"},e.a.createElement(De.a,{size:"large"},"Is Targeted Design"),e.a.createElement(f.fb,{onChange:t=>be(O=>Se(Y({},O),{isTargetedDesign:t})),className:"flex",selectedValue:N==null?void 0:N.isTargetedDesign},Pn==null?void 0:Pn.map(t=>e.a.createElement(f.eb,{className:"mr-4",value:t==null?void 0:t.id},t==null?void 0:t.name)))),e.a.createElement("div",{className:"flex mt-5 gap-2 justify-center"},e.a.createElement(f.i,{size:"medium",variant:"outline",onClick:()=>be({})},"Reset"),e.a.createElement(f.i,{loading:Ye,size:"medium",variant:"primary",onClick:()=>yn({form:"applicationData"})},"Submit")))]},e.a.createElement(f.i,{className:"cursor-pointer",size:"medium",variant:"outline",onClick:Qe},"Application Data")))}var ot=Object.defineProperty,at=Object.defineProperties,it=Object.getOwnPropertyDescriptors,Vn=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,zn=(d,l,c)=>l in d?ot(d,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):d[l]=c,Ge=(d,l)=>{for(var c in l||(l={}))rt.call(l,c)&&zn(d,c,l[c]);if(Vn)for(var c of Vn(l))st.call(l,c)&&zn(d,c,l[c]);return d},we=(d,l)=>at(d,it(l)),Ke=(d,l,c)=>new Promise((F,k)=>{var ce=Q=>{try{ge(c.next(Q))}catch(q){k(q)}},ye=Q=>{try{ge(c.throw(Q))}catch(q){k(q)}},ge=Q=>Q.done?F(Q.value):Promise.resolve(Q.value).then(ce,ye);ge((c=c.apply(d,l)).next())});const Nn={INIT:"INIT",INIT_DATA:"INIT_DATA",CHANGE_PAGE:"CHANGE_PAGE",ERROR_LOG:"ERROR_LOG"},Je={LOADTING:"LOADING",INVALID_TOKEN:"INVALID_TOKEN",FINISH:"FINISH"},rn={DIALOG:"Dialog",DRAWER:"DrawerItem"},Xe={"100%":"Default",480:"Mobile",960:"Tablet"},dt={default:"100%",mobile:"480",tablet:"960"},Kn=(d,l,c)=>new Promise(F=>{Z()({url:l}).then(k=>F({fileName:d,content:k.data})).catch(()=>F({fileName:d,content:c}))}),ct=({location:d})=>{var l,c,F,k,ce;const[ye,ge]=Object(en.b)(),{currentApplicationId:Q}=ye,q=Object(Ue.e)(),N=q.isLoggedIn(),be=Boolean((l=q.userData)==null?void 0:l.isInternalUser),He=Object(de.f)(o=>{var s,u;return(u=(s=o==null?void 0:o.auth)==null?void 0:s.workspaceData)!=null?u:[]}),{addErrorToast:Le,addSuccessToast:A}=Object(Ue.j)(),{mixPanelTrack:ie}=Object(mn.a)(),sn=Object(le.g)(),[xe,An]=e.a.useState(Je.LOADTING),[he,Ye]=e.a.useState(),[wn,dn]=e.a.useState(!1),[Jn,Dn]=e.a.useState(!1),[cn,Qe]=e.a.useState("Copy link"),[$,yn]=e.a.useState("100%"),[t,O]=e.a.useState(""),[ee,Oe]=e.a.useState(""),[ue,Be]=e.a.useState(),[x,Ce,W]=Object(je.a)(!1),Ie=gn.a.get(fn.c),L=e.a.useRef(),Pe=e.a.useRef([]),Xn=e.a.useRef(),Yn=e.a.useRef(),Me=new URLSearchParams(d.search).get("previewcode"),Qn=new URLSearchParams(d.search).get("internalusers"),Zn=new URLSearchParams(d.search).get("id"),ut="DB",{webengageTrackEvent:mt}=Object(pe.a)(),{userData:vt}=Object(Ue.e)(),xn=e.a.useRef(),Et=new URLSearchParams(d.search).get("debugmode"),bn=He==null?void 0:He.find(o=>(o==null?void 0:o.companyId)===t),ft=(bn==null?void 0:bn.isActive)&&(bn==null?void 0:bn.companyId),kn=Object(Ue.k)(pn.a.APPLICATION),Ln=We({listRef:Pe,current:We.getCurrent(Pe,he),setCurrent:o=>Ye(We.convertToSelectable(o)),dataRef:L}),Bn=v();let Fn="";const un={technology:Ne.f.TECHNOLOGY[Ve.c.figmaReact]};e.a.useEffect(()=>{N&&!Q&&Object(Fe.s)(Me).then(({data:o})=>{var s,u;const{application:a}=o;Object(Fe.t)(a==null?void 0:a._id).then(S=>{var U,E,I;((U=S==null?void 0:S.data)==null?void 0:U.code)&&((E=S==null?void 0:S.data)==null?void 0:E.isPreviewConsent)&&Dn((I=S==null?void 0:S.data)==null?void 0:I.isPreviewConsent)}).catch(Le),ge(Object(Gn.f)({projectId:(s=a==null?void 0:a.project)==null?void 0:s._id,applicationId:a==null?void 0:a._id,applicationCode:(u=a==null?void 0:a.projectDefinition)==null?void 0:u.code,currentProject:we(Ge({},a==null?void 0:a.project),{applications:[a]}),generatedProjectData:(a==null?void 0:a.generatedIdData)||{},prevGeneratedProjectData:(a==null?void 0:a.tempGeneratedIdData)||{},statics:(a==null?void 0:a.statics)||{},generatedProjectArchitecture:(a==null?void 0:a.projectType)||"",processStep:(a==null?void 0:a.processStep)||"",isClone:(a==null?void 0:a.isClone)||!1,imageScale:(a==null?void 0:a.imageScale)||1,generatedId:(a==null?void 0:a.generatedId)||"",tempGeneratedId:(a==null?void 0:a.tempGeneratedId)||"",isConstraint:(a==null?void 0:a.isConstraint)||!1}))}).catch(o=>Ce())},[]);function Mn(o,s){return Ke(this,null,function*(){var u,a,S,U;if(o!=null&&o.length){const E={key:o};s&&(E.signedUrlType=s);let I;try{I=yield Object(Ae.g)(E,{previewcode:Me});const M=(a=(u=I==null?void 0:I.data)==null?void 0:u[0])==null?void 0:a.applicationId;Be(M),un.applicationId=M}catch(M){Le(((U=(S=M==null?void 0:M.response)==null?void 0:S.data)==null?void 0:U.message)||(M==null?void 0:M.message))}return I==null?void 0:I.data}return[]})}function pt(){return Ke(this,null,function*(){var o,s,u,a,S,U,E,I,M,re,me;const Te=((o=yield Object(Ae.c)({previewcode:Me}))==null?void 0:o.data)||[],B=yield Object(Ae.e)({files:["appSource/DhiWise.json","appSource/CustomComponentList.json","appSource/ColorFile.json","appSource/CustomComponentStyleFile.json","appSource/Dimension.json","appSource/FontStyle.json","appSource/StringFile.json"]},{previewcode:Me});if((s=B==null?void 0:B.data)!=null&&s.signedUrl){O((u=B==null?void 0:B.data)==null?void 0:u.companyId);const ne=yield Promise.all((a=B==null?void 0:B.data)==null?void 0:a.signedUrl.map(D=>Kn(D.key,D.signedUrl,[]))),_=(S=ne.find(D=>D.fileName==="appSource/DhiWise.json"))==null?void 0:S.content,se=(U=ne.find(D=>D.fileName==="appSource/CustomComponentList.json"))==null?void 0:U.content,V=(E=ne.find(D=>D.fileName==="appSource/CustomComponentStyleFile.json"))==null?void 0:E.content,z=(I=ne.find(D=>D.fileName==="appSource/Dimension.json"))==null?void 0:I.content,G=(M=ne.find(D=>D.fileName==="appSource/ColorFile.json"))==null?void 0:M.content,$e=(re=ne.find(D=>D.fileName==="appSource/StringFile.json"))==null?void 0:re.content,Re=(me=ne.find(D=>D.fileName==="appSource/FontStyle.json"))==null?void 0:me.content;return{pages:_,customCompList:se,customCompStyle:V,stringJson:$e,colorJson:G,deminsionJson:z,fontsJson:Re,actionList:Te}}return{}})}function gt(){return Ke(this,null,function*(){var o,s,u,a,S,U,E,I,M,re,me,Te,B,ne,_,se,V,z,G,$e,Re,D;try{const g=yield Object(Ae.d)({previewcode:Me});if((o=g==null?void 0:g.data)!=null&&o.dhiwiseJson){const Rn=(s=g==null?void 0:g.data)==null?void 0:s.dhiwiseJson,h=(S=(a=(u=g==null?void 0:g.data)==null?void 0:u.componentJson)==null?void 0:a.filter(p=>(p==null?void 0:p.type)===r.a.COMMON_COMPONENT))==null?void 0:S.map(p=>p==null?void 0:p.data),y=(I=(E=(U=g==null?void 0:g.data)==null?void 0:U.componentJson)==null?void 0:E.filter(p=>(p==null?void 0:p.type)==="CommonClass"))==null?void 0:I.map(p=>we(Ge({},p.data),{_id:p==null?void 0:p._id})),R=(me=(re=(M=g==null?void 0:g.data)==null?void 0:M.componentJson)==null?void 0:re.filter(p=>(p==null?void 0:p.type)==="Component"))==null?void 0:me.map(p=>we(Ge({},p.data),{_id:p==null?void 0:p._id})),K={};(B=(Te=g==null?void 0:g.data)==null?void 0:Te.stringJson)==null||B.forEach(p=>{K[p.name]=p==null?void 0:p.data[p.defaultLanguage]});const w={};(_=(ne=g==null?void 0:g.data)==null?void 0:ne.componentStyleJson)==null||_.forEach(p=>{w[p.name]=p.data});const ve={};(se=g==null?void 0:g.data)==null||se.colorJson.forEach(p=>{ve[p.name]=p.lightCode});const Nt=(V=g==null?void 0:g.data)==null?void 0:V.fontJson;let qn;const Ze=yield Object(Ae.e)({files:["appSource/Dimension.json"]},{previewcode:Me});(z=Ze==null?void 0:Ze.data)!=null&&z.signedUrl&&(O((G=Ze==null?void 0:Ze.data)==null?void 0:G.companyId),qn=(Re=(yield Promise.all(($e=Ze==null?void 0:Ze.data)==null?void 0:$e.signedUrl.map(jn=>Kn(jn.key,jn.signedUrl,[])))).find(jn=>jn.fileName==="appSource/Dimension.json"))==null?void 0:Re.content);const At=((D=yield Object(Ae.c)({previewcode:Me}))==null?void 0:D.data)||[];return{pages:Rn,componentListJson:h,customCompStyle:w,CustomComponentList:R,stringJson:K,colorJson:ve,deminsionJson:qn,fontsJson:Nt,actionList:At,commonClassList:y}}return{}}catch(g){throw new Error(g)}})}function ht(){return Ke(this,null,function*(){var o,s,u,a,S,U;try{let E={};if(ut==="S3"?E=yield pt():E=yield gt(),E){const{pages:I=[]}=E,{componentListJson:M,customCompStyle:re,CustomComponentList:me,stringJson:Te,colorJson:B,deminsionJson:ne,fontsJson:_,actionList:se,commonClassList:V}=E;let z=[];Pe.current=I.map(h=>{var y,R,K,w;return h.key=(w=(K=(R=(y=h.thumbnailPath)==null?void 0:y.split)==null?void 0:R.call(y,"/"))==null?void 0:K.pop)==null?void 0:w.call(K),z.push(h.key),h}),z=yield Mn(z),Pe.current=Object(b.merge)(Pe.current,z);let G;Zn?G=I.find(h=>h.screenId===Zn):G=I.find(h=>h.isSplashScreen),G||(G=I[0]);const $e={value:G==null?void 0:G.screenId,label:G==null?void 0:G.screenName,width:G==null?void 0:G.width,height:G==null?void 0:G.height};Ye($e),xn.current=$e;let Re=[];(_==null?void 0:_.length)>0&&(Re=yield Mn(_==null?void 0:_.map(h=>h==null?void 0:h.fileName),3)),Re=Object(b.merge)(_,Re);const D=[],g={};se==null||se.forEach(h=>{h.action.forEach(y=>{const{rectCords:R}=y,K=y!=null&&y.componentRefId?y==null?void 0:y.componentRefId:y==null?void 0:y.screenId;g[K]||(g[K]={});const w=`x${R.startX}y${R.startY}w${R.width}h${R.height}`;g[K][w]||(g[K][w]=[]),g[K][w].push(y)})}),I.forEach(h=>{const y=h.screenId===G.screenId||[rn.DIALOG,rn.DRAWER].includes(h.screenTag);Object(ze.i)(h==null?void 0:h.screen,{},R=>{var K;if(y){const w=(R==null?void 0:R.image)||((K=R==null?void 0:R.background)==null?void 0:K.image)||void 0;if(w){let ve=(w==null?void 0:w.path)||(w==null?void 0:w.vector)||"";(w==null?void 0:w.isSvg)&&!(ve!=null&&ve.endsWith(".svg"))?ve+=".svg":ve!=null&&ve.endsWith(".svg")||(ve+=".png"),D.push(ve)}}if(g[h.screenId]){const w=g[h.screenId][`x${R.x}y${R.y}w${R.width}h${R.height}`];w&&w.forEach(ve=>{ve.componentId=R.id})}})}),M.forEach(h=>{Object(ze.i)(h,{},y=>{if(g[h.componentRefId]){const R=g[h.componentRefId][`x${y.x}y${y.y}w${y.width}h${y.height}`];R&&R.forEach(K=>{K.componentId=y.id})}})}),se==null||se.forEach(h=>{h.action=h.action.filter(y=>y.componentId)});let Rn=[];(D==null?void 0:D.length)>0&&(Rn=(yield Mn(D,2))||[]),L.current={colorJson:B,dhiwiseJson:I,assets:{images:Rn,fonts:Re},actionList:se,selectedPage:G==null?void 0:G.screenId,callerType:"preview"},M&&(M==null?void 0:M.length)>0&&(L.current.componentListJson=M),re&&(re==null?void 0:re.length)!==0&&(L.current.customComponentStyleFile=re),me&&(me==null?void 0:me.length)!==0&&(L.current.customComponentList=me),Te&&(L.current.stringJson=Te),ne&&(L.current.deminsionJson=ne),V&&(V==null?void 0:V.length)>0&&(L.current.commonClassJson=V);return}Le(E==null?void 0:E.message)}catch(E){throw((s=(o=E==null?void 0:E.response)==null?void 0:o.data)==null?void 0:s.status)===401&&An(Je.INVALID_TOKEN),Le(((a=(u=E==null?void 0:E.response)==null?void 0:u.data)==null?void 0:a.message)||(E==null?void 0:E.message)),N&&!Qn&&ie(Ne.g.APP_PREVIEW,we(Ge({},un),{executionStatus:Ne.f.EXECUTION_STATUS.FAILED,reason:((U=(S=E==null?void 0:E.response)==null?void 0:S.data)==null?void 0:U.message)||(E==null?void 0:E.message)})),new Error(E)}})}function Ot(o){return Ke(this,null,function*(){var s,u,a,S,U,E;if(!(L!=null&&L.current))return()=>{};if(!o)return()=>{};const I=(s=Pe.current)==null?void 0:s.find(B=>(B==null?void 0:B.screenId)===o);if(!I)return()=>{};const M=[];Pe.current.forEach(B=>{(B.screenId===I.screenId||[rn.DIALOG,rn.DRAWER].includes(B.screenTag))&&Object(ze.i)(B==null?void 0:B.screen,{},_=>{var se;const V=(_==null?void 0:_.image)||((se=_==null?void 0:_.background)==null?void 0:se.image)||void 0;if(V){let z=(V==null?void 0:V.path)||(V==null?void 0:V.vector)||"";(V==null?void 0:V.isSvg)&&!(z!=null&&z.endsWith(".svg"))?z+=".svg":z!=null&&z.endsWith(".svg")||(z+=".png"),M.push(z)}})});const re=(yield Mn(M,2))||[],me=(u=L==null?void 0:L.current)==null?void 0:u.assets;me.images=re;const Te=document.getElementById("test");return(E=Te==null?void 0:Te.contentWindow)==null||E.postMessage({type:Nn.CHANGE_PAGE,data:{currentPageJson:I,assets:{fonts:(S=(a=L==null?void 0:L.current)==null?void 0:a.assets)==null?void 0:S.fonts,images:re},selectedPage:o,actionList:(U=L==null?void 0:L.current)==null?void 0:U.actionList,dhiwiseJson:L.current.dhiwiseJson,callerType:"preview"}},"*"),()=>{}})}e.a.useEffect(()=>{(Q||!N||x)&&ht().then(()=>{An(Je.FINISH),Fn=ae()(new Date);const o=document.getElementById("test");window.addEventListener("message",s=>{var u,a,S,U,E,I;s&&(s==null?void 0:s.data)&&s.origin===i.f&&(((u=s==null?void 0:s.data)==null?void 0:u.type)===Nn.INIT&&((a=o==null?void 0:o.contentWindow)==null||a.postMessage({type:Nn.INIT_DATA,data:we(Ge({},L==null?void 0:L.current),{debugMode:Et})},"*")),((S=s==null?void 0:s.data)==null?void 0:S.type)===Nn.ERROR_LOG&&Object(P.a)({currentPage:{screenId:(U=xn.current)==null?void 0:U.value,screenName:(E=xn.current)==null?void 0:E.label},appSourcePath:"",error:(I=s==null?void 0:s.data)==null?void 0:I.data,userData:vt,currentProjectDetail:{},applicationId:un==null?void 0:un.applicationId,previewCode:Me}))},!1)}).catch(o=>{})},[x]);function It(o){return Ke(this,null,function*(){Ye(o)})}const _n=o=>{if(o==="100%"||window.innerWidth>o)return Yn.current=window.innerHeight-35,{transform:"scale(1)",height:`${window.innerHeight-48}px`};const s=window.innerWidth/o,u=1-s,a=Yn.current*(1+u);return{transform:`scale(${window.innerWidth/o})`,height:`${a}px`}},St=()=>{H()(window.location.href),Qe("Copied"),setTimeout(()=>Qe("Copy link"),2e3)},Ct=o=>{Oe(o)},Pt=e.a.useMemo(()=>{var o;const s=[];return(o=Pe==null?void 0:Pe.current)==null||o.forEach(u=>{s.push({value:u==null?void 0:u.screenId,label:u==null?void 0:u.screenName,signedUrl:u==null?void 0:u.signedUrl})}),ee?s.filter(u=>{var a,S;return(S=(a=u.label)==null?void 0:a.toLowerCase())==null?void 0:S.includes(ee==null?void 0:ee.toLowerCase())}):s},[ee,Pe.current]),Tt=o=>{Dn(o),Object(Fe.J)({code:Me,isConsent:o}).then(s=>{A(s==null?void 0:s.message)}).catch(s=>{Le((s==null?void 0:s.message)||s)})};return e.a.useEffect(()=>{const o=()=>{var s,u;if(Fn&&!Qn){const a=N?Ne.g.APP_PREVIEW:Ne.g.SHARABLE_APP_PREVIEW;ie(a,we(Ge({},un),{duration:Number((u=(s=ae()(new Date))==null?void 0:s.diff(Fn,"minute",!0))==null?void 0:u.toFixed(2)),executionStatus:Ne.f.EXECUTION_STATUS.SUCCESS}))}};return window.addEventListener("beforeunload",o),()=>{window.removeEventListener("beforeunload",o)}},[]),e.a.useEffect(()=>{if(xe===Je.FINISH){const o=`${i.f}?cacheBuster=${new Date().getTime()}`;document.getElementById("test").src=o}},[xe]),e.a.useEffect(()=>{Ot(he==null?void 0:he.value)},[he==null?void 0:he.value]),e.a.createElement(e.a.Fragment,null,e.a.createElement(j.a,null,e.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1,user-scalable=0"}),e.a.createElement("title",null,(c=qe.a)==null?void 0:c[qe.b.FIGMA_REACT])),e.a.createElement("div",{className:"w-full h-screen flex flex-col overflow-hidden"},e.a.createElement("div",{className:"sticky top-0 z-1 bg-surface2 flex justify-between items-center px-3 py-2"},e.a.createElement("div",null,e.a.createElement("div",{className:"w-32"},e.a.createElement(f.T,{whitelogo:!0}))),e.a.createElement("div",{className:"flex items-center"},xe===Je.FINISH?e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"flex gap-2"},e.a.createElement(f.i,{variant:"coolgray",size:"medium",onClick:()=>dn(!0),rightIcon:e.a.createElement("div",{className:"w-3.5 h-full"},e.a.createElement(X.b.DownArrow,null))},e.a.createElement("span",{className:"uppercase text-medium mr-1 text-b1"},"Page:")," ",he==null?void 0:he.label),e.a.createElement(f.A,{dropdownMenu:"h-full",ref:Xn,position:"right",placeholder:()=>e.a.createElement(f.i,{variant:"coolgray",size:"medium",leftIcon:e.a.createElement(X.b.WebScrreen,null),rightIcon:e.a.createElement("div",{className:"w-3.5 h-full"},e.a.createElement(X.b.DownArrow,null))},Xe==null?void 0:Xe[$]," ",$!=="100%"?` (${$}px)`:" (100%)")},(F=Object.keys(Xe))==null?void 0:F.map(o=>{const s=o==="100%",u=(Xe==null?void 0:Xe[o])+(s?" (100%)":` (${o}px)`);return e.a.createElement(f.V,{text:u,selected:$===o,onClick:()=>{mt(_e.g.PREVIEW_DEVICE_CHANGED,{applicationId:ue,technology:_e.f[Ve.c.figmaReact],selectedDevice:Xe[$]}),yn(o==="100%"?o:parseInt(o)),Xn.current.hideDropDown()}})})))):""),e.a.createElement("div",{className:"flex items-center"},e.a.createElement(f.i.Icon,{onClick:o=>{o.stopPropagation(),window.open("https://docs.dhiwise.com/docs/Designguidelines/intro")},variant:"coolgray",className:"mr-2",size:"medium"},e.a.createElement(X.b.Document,null)),N&&[Ie,ft].includes(t)&&xe===Je.FINISH?e.a.createElement("div",{className:"mr-2"},e.a.createElement(Un.a,{previewPage:!0})):"",N&&(kn==null?void 0:kn.UPDATE)&&Ie===t?e.a.createElement(e.a.Fragment,null,e.a.createElement(En.a,{dropdownWrapClass:"w-96",popOverValue:e.a.createElement("div",null,e.a.createElement(f.i,{className:"w-full",leftIcon:e.a.createElement(X.b.Link,null),onClick:St},cn),e.a.createElement("div",{className:"activeToggle mt-4 flex justify-between items-center"},e.a.createElement(f.H,{variant:"dhi_sub3"},"Show in my public profile"),e.a.createElement(f.tb,{checked:Jn,onChange:o=>{Tt(o.target.checked)}}))),data:e.a.createElement(f.i,{size:"medium",leftIcon:e.a.createElement(X.b.Upload,null)},"Share")})):!N&&e.a.createElement(f.i,{size:"medium",onClick:()=>sn.push("/")},"Try now - it's free!"))),ue&&be&&e.a.createElement(lt,{previewApplicationId:ue,screens:Ln,previewType:Bn}),xe===Je.FINISH?e.a.createElement("div",{className:"bg-surface1 flex-grow",style:{width:`${window.innerWidth}px`,height:"100%"}},Boolean((k=Ln==null?void 0:Ln.current)==null?void 0:k.pathSignedUrl)&&e.a.createElement("div",{style:we(Ge({width:$,minWidth:$,maxWidth:$,overflowY:"overlay",margin:"0 auto 0 auto",transformOrigin:"0 0"},_n($)),{display:!Bn.is.screenshot&&"none"||void 0})},e.a.createElement("img",{src:(ce=Ln.current)==null?void 0:ce.pathSignedUrl,alt:"Screenshot"})),e.a.createElement("iframe",{id:"test",title:"React UI Builder",src:i.f,"data-hj-allow-iframe":"true",style:we(Ge({width:$,minWidth:$,maxWidth:$,transformOrigin:"0 0",margin:"0 auto 0 auto",background:"#fff"},_n($)),{display:!Bn.is.preview&&"none"||void 0})})):e.a.createElement("div",{className:"flex-grow flex items-center justify-center"},xe===Je.LOADTING?e.a.createElement(f.S,null):e.a.createElement("h1",null,"Invalid Token!"))),e.a.createElement(vn.a,{pages:Pt,isOpen:wn,onChange:It,onClose:()=>{dn(!1),Oe("")},handleSearch:Ct,searchText:ee,selectedItemId:he==null?void 0:he.value}))};var Dt=m.default=ct}}]);
